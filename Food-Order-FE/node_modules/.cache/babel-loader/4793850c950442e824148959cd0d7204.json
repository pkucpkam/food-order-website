{"ast":null,"code":"var _jsxFileName = \"F:\\\\TDTU\\\\Term5\\\\Java\\\\FP\\\\Food-Order-FE\\\\src\\\\components\\\\login\\\\LoginComponent.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link, useNavigate, useParams } from 'react-router-dom';\nimport Swal from 'sweetalert2';\nimport LoginService from '../../services/LoginService';\nimport styles from './LoginComponent.css';\nimport jwt_decode from 'jwt-decode';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LoginComponent = () => {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const navigate = useNavigate();\n  var responseFromServer;\n\n  const submitLogin = e => {\n    e.preventDefault();\n\n    if (username.trim() === '' || password.trim() === '') {\n      alertInvalid(\"Invalid input, make sure everything is filed correctly and try again!\");\n    } else {\n      const loginParams = {\n        username,\n        password\n      };\n      LoginService.login(loginParams).then(response => {\n        responseFromServer = response.data.message.toString();\n\n        if (responseFromServer === \"success\") {\n          alertSuccess(\"Successfully signed in!\");\n          localStorage.token = response.data.token;\n          const decodedToken = jwt_decode(response.data.token);\n          localStorage.role = decodedToken.role;\n          sessionStorage.setItem('userId', decodedToken.sub);\n          sessionStorage.setItem('username', decodedToken.lastname + \" \" + decodedToken.firstname);\n          console;\n          setTimeout(() => navigateDependingOnRole(localStorage.role), 1500);\n        } else if (responseFromServer === \"fail\") {\n          alertInvalid(\"Invalid username or password!\");\n        } else if (responseFromServer === \"deactivatedUser\") {\n          alertInvalid(\"Can't log in! User deactivated!\");\n        }\n      });\n    }\n  };\n\n  const navigateDependingOnRole = role => {\n    if (role === \"ADMIN\") {\n      navigate('/meals');\n    } else if (role === \"USER\") {\n      navigate('/menu');\n    } else if (role === \"EMPLOYEE\") {\n      navigate('/active-final-orders');\n    }\n  };\n\n  const alertSuccess = message => {\n    Swal.fire({\n      position: 'top',\n      icon: 'success',\n      title: message,\n      showConfirmButton: false,\n      timer: 1500\n    });\n  };\n\n  const alertInvalid = message => {\n    Swal.fire({\n      icon: 'error',\n      title: 'Oops...',\n      text: message\n    });\n  }; //card col-md-6 offset-md-3 offset-md-3' za formu siroko da je, 4 4 4 da je uze i centrirano lepo, ali po vertikali nzm kako da namestim\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"login-main-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"loginContainerId\",\n      className: \"loginContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"title-login\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"icon-log-login\",\n          xmlns: \"http://www.w3.org/2000/svg\",\n          height: \"1em\",\n          viewBox: \"0 0 512 512\",\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            d: \"M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 119\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 17\n        }, this), \"Sign in\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card-body login\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Username: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Insert username\",\n              name: \"username\",\n              className: \"form-control login-input\",\n              value: username,\n              onChange: e => setUsername(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 92,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Password: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 23\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              placeholder: \"Insert password\",\n              name: \"password\",\n              className: \"form-control login-input\",\n              value: password,\n              onChange: e => setPassword(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"login-submit-btn\",\n            onClick: e => submitLogin(e),\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"registration-div\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"registration-label\",\n              children: \"Don't have an account?\\xA0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Link, {\n              className: \"registration-link\",\n              to: \"/registration\",\n              children: \"Sign up\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 19\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LoginComponent, \"IIPwWddbiEHHD7aoL5eQeOR7fTk=\", false, function () {\n  return [useNavigate];\n});\n\n_c = LoginComponent;\nexport default LoginComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"LoginComponent\");","map":{"version":3,"names":["React","useState","Link","useNavigate","useParams","Swal","LoginService","styles","jwt_decode","LoginComponent","username","setUsername","password","setPassword","navigate","responseFromServer","submitLogin","e","preventDefault","trim","alertInvalid","loginParams","login","then","response","data","message","toString","alertSuccess","localStorage","token","decodedToken","role","sessionStorage","setItem","sub","lastname","firstname","console","setTimeout","navigateDependingOnRole","fire","position","icon","title","showConfirmButton","timer","text","target","value"],"sources":["F:/TDTU/Term5/Java/FP/Food-Order-FE/src/components/login/LoginComponent.js"],"sourcesContent":["import React, {useState} from 'react'\r\nimport {Link, useNavigate, useParams} from 'react-router-dom'\r\nimport Swal from 'sweetalert2'\r\nimport LoginService from '../../services/LoginService'\r\nimport styles from './LoginComponent.css'\r\nimport jwt_decode from 'jwt-decode';\r\n\r\n\r\nconst LoginComponent = () => {\r\n\r\nconst [username, setUsername] = useState('')\r\nconst [password, setPassword] = useState('')\r\n\r\nconst navigate = useNavigate();\r\n\r\nvar responseFromServer;\r\n\r\nconst submitLogin = (e) =>{\r\n    e.preventDefault();\r\n    if(username.trim() === '' || password.trim() === ''){\r\n        alertInvalid(\"Invalid input, make sure everything is filed correctly and try again!\");\r\n      }\r\n    else{\r\n      const loginParams = {username, password}\r\n      LoginService.login(loginParams).then((response) =>{\r\n        responseFromServer = response.data.message.toString();\r\n        if(responseFromServer === \"success\"){\r\n            alertSuccess(\"Successfully signed in!\");\r\n            localStorage.token = response.data.token;\r\n            const decodedToken = jwt_decode(response.data.token);\r\n            localStorage.role = decodedToken.role; \r\n            sessionStorage.setItem('userId', decodedToken.sub); \r\n            sessionStorage.setItem('username', decodedToken.lastname +\" \" + decodedToken.firstname)\r\n            console\r\n            setTimeout(() => navigateDependingOnRole(localStorage.role), 1500);\r\n        }\r\n        else if(responseFromServer === \"fail\"){\r\n            alertInvalid(\"Invalid username or password!\");\r\n        }\r\n        else if(responseFromServer === \"deactivatedUser\"){\r\n            alertInvalid(\"Can't log in! User deactivated!\");\r\n        }\r\n      });\r\n    }\r\n    \r\n}\r\n\r\nconst navigateDependingOnRole = (role) =>{\r\n  if(role === \"ADMIN\"){\r\n    navigate('/meals')\r\n  }\r\n  else if(role === \"USER\"){\r\n    navigate('/menu')\r\n  }\r\n  else if(role === \"EMPLOYEE\"){\r\n    navigate('/active-final-orders')\r\n  }\r\n}\r\n\r\nconst alertSuccess = (message) =>{\r\n    Swal.fire({\r\n      position: 'top',\r\n      icon: 'success',\r\n      title: message,\r\n      showConfirmButton: false,\r\n      timer: 1500\r\n    });\r\n  }\r\n\r\n  const alertInvalid = (message) =>{\r\n    Swal.fire({\r\n      icon: 'error',\r\n      title: 'Oops...',\r\n      text: message,\r\n    })\r\n  }\r\n//card col-md-6 offset-md-3 offset-md-3' za formu siroko da je, 4 4 4 da je uze i centrirano lepo, ali po vertikali nzm kako da namestim\r\n  return (\r\n    <div className='login-main-container'>\r\n     \r\n        <div id='loginContainerId' className='loginContainer'>\r\n         \r\n            {/* <div className='card col-md-4 offset-md-4 offset-md-4'> */}\r\n            \r\n                <div className='title-login'>\r\n                <svg className=\"icon-log-login\" xmlns=\"http://www.w3.org/2000/svg\" height=\"1em\" viewBox=\"0 0 512 512\"><path d=\"M217.9 105.9L340.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L217.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1L32 320c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM352 416l64 0c17.7 0 32-14.3 32-32l0-256c0-17.7-14.3-32-32-32l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64 0c53 0 96 43 96 96l0 256c0 53-43 96-96 96l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32z\"/></svg>\r\n                  Sign in</div>\r\n                <div className='card-body login'>\r\n                  <form>\r\n                    <div className='form-group mb-2'>\r\n                      <label className='form-label'>Username: </label>\r\n                      <input  \r\n                          type=\"text\"\r\n                          placeholder=\"Insert username\" \r\n                          name = \"username\" \r\n                          className=\"form-control login-input\" \r\n                          value={username}\r\n                          onChange = {(e) => setUsername(e.target.value)}\r\n                          > \r\n                      </input>\r\n                    </div>\r\n                    <div className='form-group mb-2'>\r\n                      <label className='form-label'>Password: </label>\r\n                      <input  \r\n                          type=\"password\"\r\n                          placeholder=\"Insert password\" \r\n                          name = \"password\" \r\n                          className=\"form-control login-input\" \r\n                          value={password}\r\n                          onChange = {(e) => setPassword(e.target.value)}\r\n                          >  \r\n                      </input>\r\n                    </div>\r\n                  \r\n                    <button className='login-submit-btn' onClick={(e) => submitLogin(e)}>Submit</button>\r\n                    {/* <Link id=\"registrationBtn\" to=\"/registration\" className='btn btn-danger mt-2' style={{marginLeft:\"10px\"}}>Register</Link>  */}\r\n                  <div className='registration-div'>\r\n                    <div className='registration-label'>Don't have an account?&nbsp;</div>\r\n                    <Link className='registration-link' to='/registration'>Sign up</Link>\r\n                  </div>\r\n                  \r\n                  </form>\r\n                </div>\r\n        </div>\r\n        \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoginComponent"],"mappings":"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"},"metadata":{},"sourceType":"module"}